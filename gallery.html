<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Stanford Gallery</title>
<style>
#caption {
	padding: 10px;
	box-sizing: border-box;
	color: white;
	font-size: 14pt;
	font-family: sans-serif;
	background-color: #008800;
	opacity: 0.5;
}

img {
	width: 800px;
	height:600px;
}
</style>
</head>
<body>
<div id="photoSection">
	<img  id='photo' src='memchu.jpg' alt='photo' />

	<div id="caption">
		Stanford Memorial Church - the church used to have an 80' bell tower, which fell in the 1906 earthquake.
	</div>

	<div id="forwardOverlay"></div>
	<div id="backwardOverlay"></div>
</div>
<script>
"use strict";

function centerImage() {
	// console.log("centerImage run");

	// Calculate the margin sizes based on window size
	var windowWidth = window.innerWidth;
	// console.log(windowWidth);
	var windowHeight = window.innerHeight;
	// console.log(windowHeight);
	var topBottomMargins = (windowHeight - document.getElementById('photo').height) / 2;
	// console.log(topBottomMargins);
	var leftRightMargins = (windowWidth - document.getElementById('photo').width) / 2;
	// console.log(leftRightMargins);

	// Centering the image and caption
	var gallerySection = document.getElementById('photoSection');
	gallerySection.style.height =`${document.getElementById('photo').height}px`;
	gallerySection.style.width =`${document.getElementById('photo').width}px`;


	gallerySection.style.position = "relative";

	gallerySection.style.marginTop = `${topBottomMargins}px`;
	gallerySection.style.marginBottom = `${topBottomMargins}px`;
	gallerySection.style.marginLeft = `${leftRightMargins}px`;
	gallerySection.style.marginRight = `${leftRightMargins}px`;

	var galleryCaption = document.getElementById('caption');
	galleryCaption.style.position = "absolute";
	galleryCaption.style.bottom = "0px";
	galleryCaption.style.width =`${document.getElementById('photo').width}px`;

	//  Create overlays
	var forwardOverlay = document.getElementById('forwardOverlay');
	var backwardOverlay = document.getElementById('backwardOverlay');
	backwardOverlay.style.height = `${document.getElementById('photo').height}px`;
	backwardOverlay.style.width =`${document.getElementById('photo').width / 2}px`;
	backwardOverlay.style.position = "absolute";
	backwardOverlay.style.left = "0px";
	backwardOverlay.style.bottom = "0px";

	forwardOverlay.style.height = `${document.getElementById('photo').height}px`;
	forwardOverlay.style.width =`${document.getElementById('photo').width / 2}px`;
	forwardOverlay.style.position = "absolute";
	forwardOverlay.style.right = "0px";
	forwardOverlay.style.bottom = "0px";

}

window.addEventListener('load', centerImage, false)
window.addEventListener('resize', centerImage, false)


var photoArray = [
		{filename: "memchu.jpg",
		 caption: "Stanford Memorial Church - the church used to have an 80' bell tower, which fell in the 1906 earthquake."},
		{filename: "quad.jpg",
		 caption: "The Stanford Quad"},
		{filename: "hoop.jpg",
		 caption: "The <i>Red Hoop Fountain</i> with Green Library in the background."},
		{filename: "memorial-court.jpg",
		 caption: "Memorial Court (in the front of the Quad) with Rodin's <i>Burghers of Calais</i> statues."},
		{filename: "gates.jpg",
		 caption: "The Gates Building - home of Stanford Computer Science."},
		{filename: "stone-river.jpg",
		 caption: "The Stone River statue near the Cantor Arts Center (Stanford's own art museum)."},
	];

var imageCounter = 0;
var imageSource = "";
var imageCaption = "";

function nextImage() {
	// console.log("nextImage");
	var imageNode = document.getElementById('photo');
	var captionNode = document.getElementById('caption');
	imageCounter++;
	if (imageCounter >= photoArray.length) {
		imageCounter = imageCounter - photoArray.length;
	}
	// console.log(imageCounter);
	var photoArrayVal = photoArray[imageCounter];
	imageSource = photoArrayVal["filename"];
	imageNode.src = imageSource;

	imageCaption = photoArrayVal["caption"];
	captionNode.innerHTML = imageCaption;
}

function prevImage() {
	// console.log("prevImage");
	var imageNode = document.getElementById('photo');
	var captionNode = document.getElementById('caption');
	imageCounter--;
	if (imageCounter <= -1) {
		imageCounter = imageCounter + photoArray.length;
	}
	// console.log(imageCounter);
	var photoArrayVal = photoArray[imageCounter];
	imageSource = photoArrayVal["filename"];
	imageNode.src = imageSource;

	imageCaption = photoArrayVal["caption"];
	captionNode.innerHTML = imageCaption;
}

document.getElementById("forwardOverlay").addEventListener('click', nextImage, false)
document.getElementById("backwardOverlay").addEventListener('click', prevImage, false)

</script>
</body>
</html>
